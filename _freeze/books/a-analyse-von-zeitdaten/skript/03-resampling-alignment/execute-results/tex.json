{
  "hash": "baa5aab202a211be1848c888d861c2be",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: 3 Resampling & Alignment\n---\n\n# 3 Resampling & Alignment\n\nZeitreihen liegen häufig in unterschiedlichen Abtastraten vor oder\nmüssen auf eine andere Zeitskala transformiert werden.\n\nTypische Gründe:\n\n-   Vergleich zweier Zeitreihen\n-   Reduktion von Rauschen durch Aggregation\n-   Anpassung an Reporting-Intervalle\n-   Vorbereitung für Modellierung\n\n------------------------------------------------------------------------\n\n::: {.callout-note title=\"Merke\"}\nResampling bedeutet: Änderung der Zeitskala. Dabei muss entschieden\nwerden zwischen Aggregation und Interpolation.\n:::\n\n------------------------------------------------------------------------\n\n## 3.1 Ausgangszeitreihe (stündlich)\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nrng = np.random.default_rng(2)\n\nt = pd.date_range(\"2025-01-01\", periods=24*5, freq=\"H\")\ny = pd.Series(10 + rng.normal(size=len(t)), index=t, name=\"signal\")\n\ny.plot(title=\"Stündliche Zeitreihe\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/p_/ks3trxjx0jd839_g4g0vm4nc0000gn/T/ipykernel_21203/2493709333.py:7: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  t = pd.date_range(\"2025-01-01\", periods=24*5, freq=\"H\")\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](03-resampling-alignment_files/figure-pdf/cell-2-output-2.png){fig-pos='H'}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 3.2 Downsampling (Aggregation)\n\nWir aggregieren von Stunden auf Tage.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\ndaily_mean = y.resample(\"D\").mean()\ndaily_max = y.resample(\"D\").max()\n\nax = daily_mean.plot(marker=\"o\", label=\"Tagesmittel\")\ndaily_max.plot(ax=ax, marker=\"o\", label=\"Tagesmaximum\")\nplt.legend()\nplt.title(\"Downsampling: Stunden → Tage\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](03-resampling-alignment_files/figure-pdf/cell-3-output-1.png){fig-pos='H'}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n::: {.callout-tip title=\"Entscheidungshilfe\"}\n-   Mittelwert → glättet Schwankungen\\\n-   Maximum → zeigt Extremwerte\\\n-   Summe → sinnvoll bei Mengen (z. B. Energieverbrauch)\n:::\n\n------------------------------------------------------------------------\n\n## 3.3 Upsampling (Interpolation)\n\nWir erhöhen die zeitliche Auflösung.\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\ny_2h = y.resample(\"2H\").mean()\ny_up = y_2h.resample(\"H\").interpolate(\"time\")\n\nax = y_2h.plot(marker=\"o\", label=\"2H (aggregiert)\")\ny_up.plot(ax=ax, alpha=0.7, label=\"Interpoliert auf 1H\")\nplt.legend()\nplt.title(\"Upsampling mit Interpolation\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/p_/ks3trxjx0jd839_g4g0vm4nc0000gn/T/ipykernel_21203/2179676712.py:1: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  y_2h = y.resample(\"2H\").mean()\n/var/folders/p_/ks3trxjx0jd839_g4g0vm4nc0000gn/T/ipykernel_21203/2179676712.py:2: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  y_up = y_2h.resample(\"H\").interpolate(\"time\")\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](03-resampling-alignment_files/figure-pdf/cell-4-output-2.png){fig-pos='H'}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n::: {.callout-warning title=\"Achtung\"}\nInterpolation erzeugt keine neuen Messinformationen, sondern modelliert\neinen plausiblen Verlauf.\n:::\n\n------------------------------------------------------------------------\n\n## 3.4 Alignment zweier Zeitreihen\n\nZwei Zeitreihen mit unterschiedlicher Abtastrate:\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\nt2 = pd.date_range(\"2025-01-01\", periods=24*5, freq=\"2H\")\ny2 = pd.Series(5 + rng.normal(size=len(t2)), index=t2, name=\"signal2\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/p_/ks3trxjx0jd839_g4g0vm4nc0000gn/T/ipykernel_21203/3177252539.py:1: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  t2 = pd.date_range(\"2025-01-01\", periods=24*5, freq=\"2H\")\n```\n:::\n:::\n\n\nZur gemeinsamen Analyse müssen beide Reihen dieselbe Frequenz haben.\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\ny2_aligned = y2.resample(\"H\").interpolate(\"time\")\n\ndf = pd.concat([y, y2_aligned], axis=1)\n\ndf.plot(title=\"Aligned Time Series\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/p_/ks3trxjx0jd839_g4g0vm4nc0000gn/T/ipykernel_21203/1233815767.py:1: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  y2_aligned = y2.resample(\"H\").interpolate(\"time\")\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](03-resampling-alignment_files/figure-pdf/cell-6-output-2.png){fig-pos='H'}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n::: {.callout-note title=\"Merke\"}\nAlignment bedeutet: - gleiche Frequenz - gleicher Zeitbereich - gleiche\nZeitzone\n:::\n\n------------------------------------------------------------------------\n\n## 3.5 Häufige Fehlerquellen\n\n-   Vergleiche ohne vorheriges Resampling\n-   Mischung von lokaler Zeit und UTC\n-   Aggregation ohne Berücksichtigung der Datentypen (z. B. Summe vs\n    Mittelwert)\n\n------------------------------------------------------------------------\n\n## 3.6 Mini-Aufgabe\n\n1.  Erzeugen Sie eine minütliche Zeitreihe über 2 Tage.\n2.  Aggregieren Sie auf Stundenmittel.\n3.  Vergleichen Sie visuell:\n    -   Original\n    -   Stundenmittel\n4.  Interpretieren Sie den Informationsverlust.\n\n",
    "supporting": [
      "03-resampling-alignment_files/figure-pdf"
    ],
    "filters": []
  }
}