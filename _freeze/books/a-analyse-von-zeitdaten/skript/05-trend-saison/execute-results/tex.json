{
  "hash": "64777e9e18712a68214ed0a944260503",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"5 Trend & Saison\"\n---\n\n# 5 Trend & Saison\n\nViele Zeitreihen enthalten systematische Strukturen:\n\n- **Trend**: langfristige Entwicklung (steigend/fallend)\n- **Saison**: periodisch wiederkehrendes Muster\n- **Residuum**: verbleibende Schwankung\n\nDiese Zerlegung ist ein **Denkmodell**, das hilft, Struktur systematisch zu analysieren.\n\n---\n\n::: {.callout-note title=\"Merke\"}\nTrend beschreibt eine langsame Veränderung,\nSaison beschreibt eine regelmäßige Wiederholung.\n:::\n\n---\n\n## 5.1 Beispielsignal\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nrng = np.random.default_rng(10)\n\nt = pd.date_range(\"2025-01-01\", periods=24*14, freq=\"H\")\ntrend = np.linspace(0, 4, len(t))\nseason = 1.2 * np.sin(2*np.pi*(t.hour)/24)\nnoise = 0.4 * rng.normal(size=len(t))\n\ns = pd.Series(20 + trend + season + noise, index=t, name=\"signal\")\n\ns.plot(title=\"Signal mit Trend und Tages-Saison\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/p_/ks3trxjx0jd839_g4g0vm4nc0000gn/T/ipykernel_21317/1321060591.py:7: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  t = pd.date_range(\"2025-01-01\", periods=24*14, freq=\"H\")\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](05-trend-saison_files/figure-pdf/cell-2-output-2.png){fig-pos='H'}\n:::\n:::\n\n\n---\n\n## 5.2 Saison sichtbar machen\n\n### Mittelwert pro Stunde\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nseason_hour = s.groupby(s.index.hour).mean()\n\nseason_hour.plot(marker=\"o\")\nplt.title(\"Durchschnittlicher Tagesverlauf (0–23h)\")\nplt.xlabel(\"Stunde\")\nplt.ylabel(\"Mittelwert\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](05-trend-saison_files/figure-pdf/cell-3-output-1.png){fig-pos='H'}\n:::\n:::\n\n\n::: {.callout-tip title=\"Interpretation\"}\nEin periodisches Muster in dieser Darstellung deutet auf Tages-Saison hin.\n:::\n\n---\n\n## 5.3 Trend schätzen (starke Glättung)\n\n::: {.panel-tabset}\n\n## Pandas\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\ntrend_est = s.rolling(\"72H\").mean()\n\nax = s.plot(alpha=0.4, label=\"Signal\")\ntrend_est.plot(ax=ax, linewidth=2, label=\"Trend (Rolling 72H)\")\nplt.legend()\nplt.title(\"Trend-Schätzung\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/p_/ks3trxjx0jd839_g4g0vm4nc0000gn/T/ipykernel_21317/1951088130.py:1: FutureWarning: 'H' is deprecated and will be removed in a future version, please use 'h' instead.\n  trend_est = s.rolling(\"72H\").mean()\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](05-trend-saison_files/figure-pdf/cell-4-output-2.png){fig-pos='H'}\n:::\n:::\n\n\n## NumPy (Prinzip)\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\nimport numpy as np\n\ny = s.to_numpy()\n\ndef moving_average(y, window):\n    kernel = np.ones(window) / window\n    return np.convolve(y, kernel, mode=\"same\")\n\ntrend_np = moving_average(y, 72)\n\nplt.plot(y, alpha=0.4, label=\"Signal\")\nplt.plot(trend_np, linewidth=2, label=\"Trend (MA 72)\")\nplt.legend()\nplt.title(\"Trend-Schätzung (NumPy)\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](05-trend-saison_files/figure-pdf/cell-5-output-1.png){fig-pos='H'}\n:::\n:::\n\n\n:::\n\n---\n\n## 5.4 Residuum berechnen (vereinfachte Zerlegung)\n\nWir entfernen Trend und Saison grob:\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\nseason_map = s.index.hour.map(season_hour)\nresidual = s - trend_est - season_map\n\nresidual.plot(title=\"Residuum (vereinfachte Zerlegung)\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](05-trend-saison_files/figure-pdf/cell-6-output-1.png){fig-pos='H'}\n:::\n:::\n\n\n---\n\n::: {.callout-warning title=\"Achtung\"}\nDiese Zerlegung ist didaktisch vereinfacht.\nIn der Praxis existieren robustere Verfahren (z. B. STL).\nHier geht es um das Prinzip.\n:::\n\n---\n\n## 5.5 Additives vs Multiplikatives Modell\n\nAdditives Modell:\n\nSignal = Trend + Saison + Rauschen\n\nMultiplikatives Modell:\n\nSignal = Trend × Saison × Rauschen\n\nMultiplikative Modelle sind sinnvoll,\nwenn die Amplitude der Saison mit dem Niveau wächst.\n\n---\n\n## 5.6 Mini-Aufgaben\n\n1. Erhöhen Sie die Trendsteigung.  \n   - Wie beeinflusst das die Erkennung der Saison?\n\n2. Erzeugen Sie eine Wochen-Saison (Periodenlänge 7 Tage).  \n   - Wie würden Sie diese sichtbar machen?\n\n3. Testen Sie ein sehr großes Rolling-Fenster (z. B. 120H).  \n   - Welche Struktur bleibt übrig?\n\n",
    "supporting": [
      "05-trend-saison_files/figure-pdf"
    ],
    "filters": []
  }
}