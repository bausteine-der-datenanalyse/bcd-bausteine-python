{
  "hash": "becab10328744e29d246fb9140407b14",
  "result": {
    "engine": "jupyter",
    "markdown": "# Übung Hooke'sches Gesetz\nHäufig liegen Sensordaten in mehreren Dateien vor. Mögliche Gründe dafür können sein, dass die Messung\n\n  - von unterschiedlichen Personen,\n  - an unterschiedlichen Standorten,\n  - zu unterschiedlichen Zeiten,\n  - mit verschiedenen Geräten oder\n  - für unterschiedliche Messgrößen durchgeführt wurden.\n\nIm Ordner '01-daten/hooke' liegen mehrere txt-Dateien mit Messdaten zur Federausdehnung. In diesem Kapitel sollen Sie das bisher Gelernte anwenden und die folgenden Fragen beantworten.\n\n1. Liegen ungültige Messungen vor?\n2. Welche Werte können für die Federkonstanten ermittelt werden?\n3. Wurden die Messungen mit der gleichen Feder (oder mit Federn mit gleicher Federkonstante) durchgeführt, wenn als Vertrauenswahrscheinlichkeit 90 % bzw. 95 % angenommen werden soll?\n\nIm Abschnitt @sec-dateien-einlesen finden Sie Hinweise und im Abschnitt @sec-aufgabe-einlesen eine Musterlösung zum Einlesen der Dateien. Anschließend sollen Sie die Aufgabenstellung eigenständig bearbeiten. In Abschnitt @sec-lösung-datenaufbereitung finden Sie eine Musterlösung für die Aufbereitung der Daten. In @sec-lösung-federkonstanten die Musterlösung zur Bestimmung der Federkonstanten.\n\n*Hinweis: Je nach gewähltem Vorgehen können sich unterschiedliche Ergebnisse ergeben (etwa bei der Bewertung von und dem Umgang mit Extremwerten / Ausreißern).*\n\n\n\n## Dateien einlesen {#sec-dateien-einlesen}\nFür das Einlesen der Dateien können Sie das Modul glob verwenden (siehe [Methodenbaustein Einlesen strukturierter Datensätze](https://bausteine-der-datenanalyse.github.io/m-sensordatenanalyse/output/book/)).\n\nZunächst kann der Funktion `glob.glob()` das Argument `pathname = *` übergeben werden. Der Platzhalter `*` steht für eine beliebige Zeichenfolge (außer Dateipfadelemente wie `/` oder `.`), sodass die Namen aller im angegebenen Ordner gespeicherten Dateien ausgelesen werden. Auf diese Weise kann die Anzahl der Dateien und die Dateiendung bestimmt werden, falls dies noch unbekannt ist.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nordnerpfad = '01-daten/hooke'\n\npfadliste = glob.glob(pathname = '*', root_dir = ordnerpfad, recursive = False)\nprint(pfadliste)\nprint(f\"Anzahl Dateien: {len(pfadliste)}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['team_kreativkoepfe.txt', 'team_ma.txt', 'team_fabi.txt', 'team_die_ahnungslosen.txt']\nAnzahl Dateien: 4\n```\n:::\n:::\n\n\nMit den Dateipfaden können die Dateien mit Hilfe einer Schleife in eine Liste eingelesen werden. Zunächst werden nur die jeweils ersten 3 Zeilen eingelesen, um einen Eindruck vom Aufbau der Dateien zu erhalten.\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nfor pfad in pfadliste:\n  zwischenspeicher = pd.read_csv(filepath_or_buffer = ordnerpfad + '/' + pfad, nrows = 3)\n  print(pfad, \"\\n\", zwischenspeicher, \"\\n\", sep = '')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nteam_kreativkoepfe.txt\n   10:33:02\\t109.64 cm\\t0\n0  10:33:05\\t109.62 cm\\t0\n1  10:33:08\\t109.64 cm\\t0\n2  10:33:11\\t109.62 cm\\t0\n\nteam_ma.txt\n   10:09:38\\t109.26 cm\\t0\n0  10:09:41\\t109.26 cm\\t0\n1  10:09:44\\t109.28 cm\\t0\n2  10:09:47\\t109.18 cm\\t0\n\nteam_fabi.txt\n   09:17:54\\t110.31 cm\\t0\n0  09:17:57\\t110.29 cm\\t0\n1  09:18:03\\t110.74 cm\\t0\n2  09:18:06\\t109.95 cm\\t0\n\nteam_die_ahnungslosen.txt\n   11:03:23\\t109.66 cm\\t0\n0  11:03:23\\t109.62 cm\\t0\n1  11:03:23\\t109.73 cm\\t0\n2  11:03:23\\t109.55 cm\\t0\n\n```\n:::\n:::\n\n\nDie Dateien beinhalten keine Spaltenbeschriftung und verwenden den Tabulator '\\\\t' als Trennzeichen. Die erste Spalte enthält einen Zeitstempel, die zweite die gemessene Federausdehnung und die dritte (vermutlich) das angehängte Gewicht.\n\n## Aufgabe Dateien einlesen {#sec-aufgabe-einlesen}\nLesen Sie die Dateien nun ein. Prüfen Sie dabei:\n\n  - ob die Datentypen korrekt eingelesen werden und \n  - auf fehlende Werte.\n\nSie können:\n\n  a) Jede Datei einzeln einlesen.\n  b) Mit dem Modul glob die Dateien automatisch einlesen und jeweils in einem separaten Objekt speichern (*Hinweis:* Dieses Vorgehen wird im  [Methodenbaustein Einlesen strukturierter Datensätze](https://bausteine-der-datenanalyse.github.io/m-sensordatenanalyse/output/book/) gezeigt). \n  c) Die Dateien mit dem Modul glob automatisch einlesen und in einem Objekt zusammenführen.\n\nDie verschiedenen Möglichkeiten sind mit zunehmend mehr Aufwand beim Programmieren verbunden. Je mehr separate Dateien Sie auswerten möchten, desto mehr Automatisierung ist gefragt. Da bei der Auswertung von Sensordaten häufig zahlreiche Dateien ausgewertet werden müssen, wird in der Musterlösung Variante c) gezeigt.\n  \n::: {#tip-schrittweise .callout-tip collapse=\"false\"}\n## Schrittweises Vorgehen\nDas Einlesen der Dateien wird voraussichtlich der aufwändigste und fehleranfälligste Arbeitsschritt sein. Entwickeln Sie Ihre Lösung Schritt für Schritt. Beginnen Sie mit der Variante a). Wenn Sie die Dateien eingelesen haben, können Sie sich durch die Weiterentwicklung zur Variante b) mit dem Modul glob vertraut machen. Darauf aufbauend können Sie mit der Variante c) die Automatisierung für beliebig viele Dateien umsetzen.\n:::\n\n::: {#tip-muster-dateien .callout-tip collapse=\"true\"}\n## Musterlösung Dateien einlesen\nDer erste Versuch, die Dateien einzulesen, scheitert mit einer Fehlermeldung. Die Anweisungen werden deshalb in die Struktur zur Ausnahmebehandlung eingebettet und die verursachende Datei abgefangen. (Sollten mehrere Dateien Fehler erzeugen, müssten die Dateien in einer Liste gespeichert und später - falls möglich - mit einer Schleife weiter behandelt werden.)\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\nhooke = pd.DataFrame(columns = ['Zeit', 'Abstand', 'Gewicht', 'Team']) # ein leerer DataFrame\n\nfor pfad in pfadliste:\n\n  try:\n    zwischenspeicher = pd.read_csv(filepath_or_buffer = ordnerpfad + '/' + pfad, sep = '\\t', names = ['Zeit', 'Abstand', 'Gewicht'])\n\n    # Dateiname als Spalte einfügen\n    zwischenspeicher['Team'] = pfad[5:-4] # 'team_' und die Dateiendung abschneiden \n\n    hooke = pd.concat([hooke, zwischenspeicher], ignore_index = True)\n  \n  except Exception as error:\n    print(\"Pfad der Problemdatei: \", pfad, error, sep = \"\\n\")\n    pfad_problem_datei = pfad\n\nprint(hooke.info(), \"\\n\")\nprint(\"Erfolgreich einglesen:\\n\", hooke['Team'].unique(), sep = '')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nPfad der Problemdatei: \nteam_ma.txt\nError tokenizing data. C error: Expected 3 fields in line 135, saw 4\n\n<class 'pandas.core.frame.DataFrame'>\nRangeIndex: 359 entries, 0 to 358\nData columns (total 4 columns):\n #   Column   Non-Null Count  Dtype  \n---  ------   --------------  -----  \n 0   Zeit     355 non-null    object \n 1   Abstand  355 non-null    object \n 2   Gewicht  355 non-null    float64\n 3   Team     359 non-null    object \ndtypes: float64(1), object(3)\nmemory usage: 11.3+ KB\nNone \n\nErfolgreich einglesen:\n['kreativkoepfe' 'fabi' 'die_ahnungslosen']\n```\n:::\n:::\n\n\nDer Fehlermeldung zufolge besteht Zeile 135 aus 4 statt aus 3 Spalten. Die fehlerverursachende Datei wird deshalb zeilenweise durchlaufen und jede Zeile ausgegeben, die mehr als 3 Einträge hat. Zur Kontrolle werden auch die ersten 5 Zeilen ausgegeben.\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\n# einen leeren DataFrame mit 3 Spalten erstellen\ndf = pd.DataFrame(data = [], columns = ['Zeit', 'Abstand', 'Gewicht'])\n\ndateiobjekt_problem_datei = open(file = ordnerpfad + '/' + pfad_problem_datei, mode = 'r')\n\nindex = 0\nfor zeile in dateiobjekt_problem_datei:\n  try:\n    zwischenspeicher = zeile.split(sep = \"\\t\")\n    if len(zwischenspeicher) > 3:\n      print(\"Index =\", index, \":\", zwischenspeicher)\n    elif index <= 5:\n      print(zeile)\n    index += 1\n  except Exception as error:\n    print(error)\n\ndateiobjekt_problem_datei.close()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n10:09:38\t109.26 cm\t0\n\n\n\n10:09:41\t109.26 cm\t0\n\n\n\n10:09:44\t109.28 cm\t0\n\n\n\nIndex = 134 : ['10:29:27', '105.49 cm', '300', '\\n']\n```\n:::\n:::\n\n\nJede zweite Zeile ist leer. In Zeile 134 wird ein Zeilenumbruch '\\\\n' eingelesen. Die Datei wird deshalb mit einer angepassten Schleife erneut durchlaufen. Aus der betreffenden Zeile wird der zusätzliche Zeilenumbruch '\\\\n' entfernt. Leere Zeilen werden übersprungen. Die korrekten Zeilen werden an den DataFrame hooke angefügt.\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\ndateiobjekt_problem_datei = open(file = ordnerpfad + '/' + pfad_problem_datei, mode = 'r')\n\nfor zeile in dateiobjekt_problem_datei:\n  try:\n    zwischenspeicher = zeile.split(sep = \"\\t\")\n    if len(zwischenspeicher) > 3:\n      zwischenspeicher = zwischenspeicher[:3]\n    elif len(zwischenspeicher) < 3: # leere Zeilen überspringen\n      continue\n    # Teamnamen als 4. Spalte anfügen\n    zwischenspeicher.append(pfad_problem_datei[5:-4]) # 'team_' und die Dateiendung abschneiden \n\n    hooke.loc[len(hooke)] = pd.Series(zwischenspeicher).values\n\n  except Exception as error:\n    print(error)\n    print(pd.Series(zwischenspeicher).values)\n\ndateiobjekt_problem_datei.close()\n\nprint(\"Erfolgreich einglesen:\\n\", hooke['Team'].unique(), \"\\n\", sep = '')\nprint(hooke.info())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nErfolgreich einglesen:\n['kreativkoepfe' 'fabi' 'die_ahnungslosen' 'ma']\n\n<class 'pandas.core.frame.DataFrame'>\nIndex: 537 entries, 0 to 536\nData columns (total 4 columns):\n #   Column   Non-Null Count  Dtype \n---  ------   --------------  ----- \n 0   Zeit     533 non-null    object\n 1   Abstand  533 non-null    object\n 2   Gewicht  533 non-null    object\n 3   Team     537 non-null    object\ndtypes: object(4)\nmemory usage: 21.0+ KB\nNone\n```\n:::\n:::\n\n\nAnschließend werden zum einen die Zeilen mit Nullwerten betrachtet ...\n\n::: {.cell execution_count=7}\n``` {.python .cell-code}\nprint(hooke.loc[hooke.apply(pd.isna).any(axis = 1), :])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    Zeit Abstand Gewicht              Team\n3    NaN     NaN     NaN     kreativkoepfe\n23   NaN     NaN     NaN     kreativkoepfe\n28   NaN     NaN     NaN     kreativkoepfe\n322  NaN     NaN     NaN  die_ahnungslosen\n```\n:::\n:::\n\n\n... und entfernt.\n\n::: {.cell execution_count=8}\n``` {.python .cell-code}\nhooke.drop(np.where(hooke.apply(pd.isna).any(axis = 1))[0], inplace = True)\n```\n:::\n\n\nZum anderen werden die Datentypen kontrolliert.\n\n  - Die Zeit kann als string stehen bleiben, da sie für die Auswertung nicht benötigt wird.\n  - Der gemessene Abstand ist mit ' cm' notiert - diese Zeichenkette wird entfernt. Anschließend sollte die Spalte als numerisch erkannt werden.\n  - Das Gewicht sollte numerische Werte enthalten, wird aber als Datentyp object eingelesen und muss weiter untersucht werden.\n  - Der Spalte Team könnte der [Pandas Datentyp category](https://pandas.pydata.org/docs/user_guide/categorical.html) zugewiesen werden, notwendig ist es aber nicht.\n\nString ' cm' entfernen.\n\n::: {.cell execution_count=9}\n``` {.python .cell-code}\nhooke.replace(' cm', '', regex = True, inplace = True)\n```\n:::\n\n\nOb alle Elemente einer Zelle numerisch sind, kann mit der Pandas-Methode `pd.Series.str.isnumeric()` überprüft werden. Ein Blick auf die Daten zeigt die Ursache.\n\n::: {.cell execution_count=10}\n``` {.python .cell-code}\nprint(hooke['Gewicht'].str.isnumeric().sum())\n\nprint(hooke['Gewicht'].head())\nprint(hooke['Gewicht'].tail())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1\n0    0.0\n1    0.0\n2    0.0\n4    0.0\n5    0.0\nName: Gewicht, dtype: object\n532    850\\n\n533    850\\n\n534    850\\n\n535    850\\n\n536    850\\n\nName: Gewicht, dtype: object\n```\n:::\n:::\n\n\nDie Zeilenumbrüche werden ebenfalls entfernt.\n\n::: {.cell execution_count=11}\n``` {.python .cell-code}\nhooke.replace('\\n', '', regex = True, inplace = True)\nprint(hooke['Gewicht'].str.isnumeric().sum())\nprint(hooke['Gewicht'].tail())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n178\n532    850\n533    850\n534    850\n535    850\n536    850\nName: Gewicht, dtype: object\n```\n:::\n:::\n\n\n::: {.cell execution_count=12}\n``` {.python .cell-code}\nprint(hooke.info(), \"\\n\")\n\n# explizite Zuweisung\nhooke['Abstand'] = hooke['Abstand'].astype('float')\nhooke['Gewicht'] = hooke['Gewicht'].astype('float')\n\nprint(hooke.info())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.frame.DataFrame'>\nIndex: 533 entries, 0 to 536\nData columns (total 4 columns):\n #   Column   Non-Null Count  Dtype \n---  ------   --------------  ----- \n 0   Zeit     533 non-null    object\n 1   Abstand  533 non-null    object\n 2   Gewicht  533 non-null    object\n 3   Team     533 non-null    object\ndtypes: object(4)\nmemory usage: 20.8+ KB\nNone \n\n<class 'pandas.core.frame.DataFrame'>\nIndex: 533 entries, 0 to 536\nData columns (total 4 columns):\n #   Column   Non-Null Count  Dtype  \n---  ------   --------------  -----  \n 0   Zeit     533 non-null    object \n 1   Abstand  533 non-null    float64\n 2   Gewicht  533 non-null    float64\n 3   Team     533 non-null    object \ndtypes: float64(2), object(2)\nmemory usage: 20.8+ KB\nNone\n```\n:::\n:::\n\n\n:::\n\nDas Ergebnis könnte so aussehen:\n\n::: {.cell execution_count=13}\n``` {.python .cell-code}\nhooke.groupby(by = ['Team', 'Gewicht'], sort = False)['Abstand'].describe()\n```\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>count</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>min</th>\n      <th>25%</th>\n      <th>50%</th>\n      <th>75%</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>Team</th>\n      <th>Gewicht</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"12\" valign=\"top\">kreativkoepfe</th>\n      <th>0.0</th>\n      <td>9.0</td>\n      <td>109.676667</td>\n      <td>0.053619</td>\n      <td>109.62</td>\n      <td>109.6400</td>\n      <td>109.640</td>\n      <td>109.7300</td>\n      <td>109.74</td>\n    </tr>\n    <tr>\n      <th>50.0</th>\n      <td>8.0</td>\n      <td>108.557500</td>\n      <td>0.489949</td>\n      <td>107.84</td>\n      <td>108.2325</td>\n      <td>108.495</td>\n      <td>108.8675</td>\n      <td>109.33</td>\n    </tr>\n    <tr>\n      <th>100.0</th>\n      <td>10.0</td>\n      <td>107.093000</td>\n      <td>0.922726</td>\n      <td>106.30</td>\n      <td>106.3800</td>\n      <td>106.875</td>\n      <td>107.2700</td>\n      <td>109.11</td>\n    </tr>\n    <tr>\n      <th>150.0</th>\n      <td>10.0</td>\n      <td>105.934000</td>\n      <td>0.599967</td>\n      <td>104.87</td>\n      <td>105.6125</td>\n      <td>106.020</td>\n      <td>106.3075</td>\n      <td>106.84</td>\n    </tr>\n    <tr>\n      <th>200.0</th>\n      <td>10.0</td>\n      <td>105.453000</td>\n      <td>1.618278</td>\n      <td>103.52</td>\n      <td>104.0750</td>\n      <td>105.035</td>\n      <td>106.7700</td>\n      <td>108.27</td>\n    </tr>\n    <tr>\n      <th>250.0</th>\n      <td>10.0</td>\n      <td>102.527000</td>\n      <td>0.796228</td>\n      <td>101.10</td>\n      <td>102.1700</td>\n      <td>102.410</td>\n      <td>102.7625</td>\n      <td>103.89</td>\n    </tr>\n    <tr>\n      <th>300.0</th>\n      <td>10.0</td>\n      <td>101.236000</td>\n      <td>0.702095</td>\n      <td>100.29</td>\n      <td>100.7625</td>\n      <td>101.010</td>\n      <td>101.8350</td>\n      <td>102.45</td>\n    </tr>\n    <tr>\n      <th>350.0</th>\n      <td>10.0</td>\n      <td>98.804000</td>\n      <td>1.471629</td>\n      <td>97.43</td>\n      <td>97.5725</td>\n      <td>98.155</td>\n      <td>100.3600</td>\n      <td>100.84</td>\n    </tr>\n    <tr>\n      <th>400.0</th>\n      <td>9.0</td>\n      <td>96.827778</td>\n      <td>1.036783</td>\n      <td>95.80</td>\n      <td>95.8900</td>\n      <td>96.900</td>\n      <td>97.4100</td>\n      <td>98.78</td>\n    </tr>\n    <tr>\n      <th>450.0</th>\n      <td>9.0</td>\n      <td>95.515556</td>\n      <td>1.115954</td>\n      <td>93.91</td>\n      <td>94.6300</td>\n      <td>95.750</td>\n      <td>95.8300</td>\n      <td>97.24</td>\n    </tr>\n    <tr>\n      <th>500.0</th>\n      <td>8.0</td>\n      <td>95.336250</td>\n      <td>1.564298</td>\n      <td>93.30</td>\n      <td>94.4575</td>\n      <td>95.140</td>\n      <td>96.5625</td>\n      <td>97.69</td>\n    </tr>\n    <tr>\n      <th>550.0</th>\n      <td>9.0</td>\n      <td>93.155556</td>\n      <td>0.352956</td>\n      <td>92.76</td>\n      <td>92.8700</td>\n      <td>92.950</td>\n      <td>93.4000</td>\n      <td>93.76</td>\n    </tr>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">fabi</th>\n      <th>0.0</th>\n      <td>10.0</td>\n      <td>110.366000</td>\n      <td>0.253693</td>\n      <td>109.95</td>\n      <td>110.2900</td>\n      <td>110.310</td>\n      <td>110.5800</td>\n      <td>110.74</td>\n    </tr>\n    <tr>\n      <th>50.0</th>\n      <td>12.0</td>\n      <td>110.425833</td>\n      <td>0.210992</td>\n      <td>110.22</td>\n      <td>110.3050</td>\n      <td>110.310</td>\n      <td>110.6225</td>\n      <td>110.77</td>\n    </tr>\n    <tr>\n      <th>101.0</th>\n      <td>9.0</td>\n      <td>108.238889</td>\n      <td>0.231163</td>\n      <td>107.96</td>\n      <td>107.9900</td>\n      <td>108.410</td>\n      <td>108.4200</td>\n      <td>108.47</td>\n    </tr>\n    <tr>\n      <th>152.0</th>\n      <td>10.0</td>\n      <td>106.902000</td>\n      <td>0.335685</td>\n      <td>106.45</td>\n      <td>106.6000</td>\n      <td>106.980</td>\n      <td>106.9950</td>\n      <td>107.43</td>\n    </tr>\n    <tr>\n      <th>201.0</th>\n      <td>10.0</td>\n      <td>105.253000</td>\n      <td>1.052416</td>\n      <td>102.30</td>\n      <td>105.4600</td>\n      <td>105.470</td>\n      <td>105.5775</td>\n      <td>105.90</td>\n    </tr>\n    <tr>\n      <th>253.0</th>\n      <td>11.0</td>\n      <td>104.279091</td>\n      <td>0.466036</td>\n      <td>103.55</td>\n      <td>103.9400</td>\n      <td>104.100</td>\n      <td>104.6600</td>\n      <td>104.91</td>\n    </tr>\n    <tr>\n      <th>302.0</th>\n      <td>12.0</td>\n      <td>102.650000</td>\n      <td>0.390943</td>\n      <td>102.09</td>\n      <td>102.4650</td>\n      <td>102.560</td>\n      <td>103.0100</td>\n      <td>103.35</td>\n    </tr>\n    <tr>\n      <th>353.0</th>\n      <td>11.0</td>\n      <td>100.673636</td>\n      <td>0.199613</td>\n      <td>100.50</td>\n      <td>100.5500</td>\n      <td>100.580</td>\n      <td>100.7800</td>\n      <td>101.03</td>\n    </tr>\n    <tr>\n      <th>403.0</th>\n      <td>14.0</td>\n      <td>99.447143</td>\n      <td>0.424815</td>\n      <td>98.97</td>\n      <td>99.1025</td>\n      <td>99.410</td>\n      <td>99.5900</td>\n      <td>100.26</td>\n    </tr>\n    <tr>\n      <th>455.0</th>\n      <td>11.0</td>\n      <td>97.839091</td>\n      <td>0.228099</td>\n      <td>97.51</td>\n      <td>97.6200</td>\n      <td>97.880</td>\n      <td>98.0350</td>\n      <td>98.15</td>\n    </tr>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">die_ahnungslosen</th>\n      <th>0.0</th>\n      <td>10.0</td>\n      <td>109.759000</td>\n      <td>0.180705</td>\n      <td>109.55</td>\n      <td>109.6300</td>\n      <td>109.730</td>\n      <td>109.7925</td>\n      <td>110.09</td>\n    </tr>\n    <tr>\n      <th>50.0</th>\n      <td>8.0</td>\n      <td>108.912500</td>\n      <td>0.180930</td>\n      <td>108.53</td>\n      <td>108.8800</td>\n      <td>108.930</td>\n      <td>109.0250</td>\n      <td>109.11</td>\n    </tr>\n    <tr>\n      <th>100.0</th>\n      <td>12.0</td>\n      <td>107.725833</td>\n      <td>0.704446</td>\n      <td>106.76</td>\n      <td>107.1975</td>\n      <td>107.735</td>\n      <td>108.0725</td>\n      <td>108.92</td>\n    </tr>\n    <tr>\n      <th>150.0</th>\n      <td>19.0</td>\n      <td>106.265789</td>\n      <td>0.759505</td>\n      <td>104.67</td>\n      <td>105.7050</td>\n      <td>106.120</td>\n      <td>106.7100</td>\n      <td>107.87</td>\n    </tr>\n    <tr>\n      <th>200.0</th>\n      <td>18.0</td>\n      <td>104.616111</td>\n      <td>0.392955</td>\n      <td>103.96</td>\n      <td>104.2650</td>\n      <td>104.590</td>\n      <td>104.8150</td>\n      <td>105.23</td>\n    </tr>\n    <tr>\n      <th>250.0</th>\n      <td>18.0</td>\n      <td>102.906667</td>\n      <td>0.221519</td>\n      <td>102.35</td>\n      <td>102.8025</td>\n      <td>102.890</td>\n      <td>102.9750</td>\n      <td>103.33</td>\n    </tr>\n    <tr>\n      <th>300.0</th>\n      <td>11.0</td>\n      <td>101.840000</td>\n      <td>0.894561</td>\n      <td>101.00</td>\n      <td>101.3650</td>\n      <td>101.460</td>\n      <td>101.8150</td>\n      <td>104.15</td>\n    </tr>\n    <tr>\n      <th>350.0</th>\n      <td>14.0</td>\n      <td>100.264286</td>\n      <td>0.265930</td>\n      <td>99.98</td>\n      <td>100.1475</td>\n      <td>100.170</td>\n      <td>100.2625</td>\n      <td>101.06</td>\n    </tr>\n    <tr>\n      <th>400.0</th>\n      <td>11.0</td>\n      <td>99.239091</td>\n      <td>0.232786</td>\n      <td>98.94</td>\n      <td>99.0500</td>\n      <td>99.130</td>\n      <td>99.4150</td>\n      <td>99.57</td>\n    </tr>\n    <tr>\n      <th>450.0</th>\n      <td>12.0</td>\n      <td>98.042500</td>\n      <td>0.468016</td>\n      <td>97.51</td>\n      <td>97.6750</td>\n      <td>97.970</td>\n      <td>98.2850</td>\n      <td>99.08</td>\n    </tr>\n    <tr>\n      <th rowspan=\"18\" valign=\"top\">ma</th>\n      <th>0.0</th>\n      <td>10.0</td>\n      <td>109.258000</td>\n      <td>0.042374</td>\n      <td>109.18</td>\n      <td>109.2600</td>\n      <td>109.260</td>\n      <td>109.2800</td>\n      <td>109.31</td>\n    </tr>\n    <tr>\n      <th>50.0</th>\n      <td>10.0</td>\n      <td>107.179000</td>\n      <td>1.809588</td>\n      <td>105.83</td>\n      <td>106.0875</td>\n      <td>106.185</td>\n      <td>107.9575</td>\n      <td>110.81</td>\n    </tr>\n    <tr>\n      <th>100.0</th>\n      <td>10.0</td>\n      <td>102.101000</td>\n      <td>2.958804</td>\n      <td>99.37</td>\n      <td>99.6725</td>\n      <td>101.120</td>\n      <td>104.4825</td>\n      <td>106.67</td>\n    </tr>\n    <tr>\n      <th>150.0</th>\n      <td>11.0</td>\n      <td>106.656364</td>\n      <td>4.727985</td>\n      <td>100.29</td>\n      <td>100.9900</td>\n      <td>109.730</td>\n      <td>110.1600</td>\n      <td>110.60</td>\n    </tr>\n    <tr>\n      <th>200.0</th>\n      <td>9.0</td>\n      <td>108.456667</td>\n      <td>1.666816</td>\n      <td>106.74</td>\n      <td>107.2900</td>\n      <td>107.740</td>\n      <td>110.1700</td>\n      <td>111.06</td>\n    </tr>\n    <tr>\n      <th>250.0</th>\n      <td>10.0</td>\n      <td>106.931000</td>\n      <td>0.957838</td>\n      <td>105.66</td>\n      <td>105.9325</td>\n      <td>107.540</td>\n      <td>107.6975</td>\n      <td>107.80</td>\n    </tr>\n    <tr>\n      <th>300.0</th>\n      <td>10.0</td>\n      <td>105.696000</td>\n      <td>0.194376</td>\n      <td>105.46</td>\n      <td>105.5075</td>\n      <td>105.715</td>\n      <td>105.8650</td>\n      <td>105.94</td>\n    </tr>\n    <tr>\n      <th>350.0</th>\n      <td>10.0</td>\n      <td>104.838000</td>\n      <td>0.530949</td>\n      <td>104.10</td>\n      <td>104.5150</td>\n      <td>104.685</td>\n      <td>105.1475</td>\n      <td>105.94</td>\n    </tr>\n    <tr>\n      <th>400.0</th>\n      <td>10.0</td>\n      <td>104.790000</td>\n      <td>0.602974</td>\n      <td>104.31</td>\n      <td>104.4775</td>\n      <td>104.550</td>\n      <td>104.6925</td>\n      <td>106.09</td>\n    </tr>\n    <tr>\n      <th>450.0</th>\n      <td>10.0</td>\n      <td>104.517000</td>\n      <td>0.475513</td>\n      <td>103.91</td>\n      <td>104.2225</td>\n      <td>104.510</td>\n      <td>104.7125</td>\n      <td>105.56</td>\n    </tr>\n    <tr>\n      <th>500.0</th>\n      <td>10.0</td>\n      <td>104.456000</td>\n      <td>0.569097</td>\n      <td>103.65</td>\n      <td>104.0925</td>\n      <td>104.420</td>\n      <td>104.6400</td>\n      <td>105.71</td>\n    </tr>\n    <tr>\n      <th>550.0</th>\n      <td>10.0</td>\n      <td>103.004000</td>\n      <td>0.800475</td>\n      <td>101.55</td>\n      <td>102.7650</td>\n      <td>103.065</td>\n      <td>103.5000</td>\n      <td>104.20</td>\n    </tr>\n    <tr>\n      <th>600.0</th>\n      <td>10.0</td>\n      <td>101.403000</td>\n      <td>0.621183</td>\n      <td>100.22</td>\n      <td>101.5000</td>\n      <td>101.580</td>\n      <td>101.7800</td>\n      <td>101.94</td>\n    </tr>\n    <tr>\n      <th>650.0</th>\n      <td>10.0</td>\n      <td>100.109000</td>\n      <td>0.082523</td>\n      <td>99.97</td>\n      <td>100.0475</td>\n      <td>100.110</td>\n      <td>100.1875</td>\n      <td>100.21</td>\n    </tr>\n    <tr>\n      <th>700.0</th>\n      <td>10.0</td>\n      <td>98.871000</td>\n      <td>0.534155</td>\n      <td>98.24</td>\n      <td>98.5425</td>\n      <td>98.715</td>\n      <td>99.1850</td>\n      <td>100.02</td>\n    </tr>\n    <tr>\n      <th>750.0</th>\n      <td>9.0</td>\n      <td>97.966667</td>\n      <td>0.729315</td>\n      <td>96.86</td>\n      <td>97.5000</td>\n      <td>97.980</td>\n      <td>98.6800</td>\n      <td>98.77</td>\n    </tr>\n    <tr>\n      <th>800.0</th>\n      <td>11.0</td>\n      <td>97.115455</td>\n      <td>0.540210</td>\n      <td>96.19</td>\n      <td>96.7000</td>\n      <td>97.330</td>\n      <td>97.5050</td>\n      <td>97.72</td>\n    </tr>\n    <tr>\n      <th>850.0</th>\n      <td>8.0</td>\n      <td>95.715000</td>\n      <td>0.245822</td>\n      <td>95.35</td>\n      <td>95.5625</td>\n      <td>95.750</td>\n      <td>95.8775</td>\n      <td>96.07</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Musterlösung Daten aufbereiten {#sec-lösung-datenaufbereitung}\nIm nächsten Schritt werden die Daten geprüft und ggf. bereinigt. Dies umfasst die  Schritte:\n\n  - auf Ausreißer prüfen (studentisierte z-Werte und grafisch) und ggf. bereinigen,\n  - Normierung der Abstandsmessung auf den Nullpunkt und Umrechnung der verwendeten Einheiten in SI-Einheiten und\n  - grafische Darstellung.\n\n::: {#wrn-globgroupby .callout-warning appearance=\"simple\"}\n## glob, pd.groupby und SciPy\nDie Ausführung des folgenden Codes kann lokal unterschiedlich ausfallen, je nach dem, in welcher Reihenfolge die Dateien mit dem Modul glob eingelesen wurden. Im Folgenden werden aus einem groupby-Objekt Indexpositionen bestimmt, an denen eine Bedingung wahr ist. Mit diesen Indexpositionen wird dann auf den ursprünglichen DataFrame zugegriffen. Pandas sortiert die Gruppen im groupby-Objekt standardmäßig alphabetisch (`sort = True`). Wenn die mit glob eingelesenen Dateien nicht in alphabetischer Reihenfolge vorliegen, wird mit falschen Indexpositionen auf den DataFrame zugegriffen.\n\nDem kann durch alphabetisches Sortieren der mit glob eingelesenen Dateien bzw. des DataFrames nach den groupby-Kriterien begegnet werden oder, wie im Folgenden, durch das Argument `pd.groupby(by = Bedingung, sort = False)`. Letztere Variante ist flexibler.\n\nAuch gibt `scipy.stats.zscore()` je nach Version eine `pd.Series` oder ein `np.array` zurück. Dementsprechend sind die Methoden aus Pandas oder NumPy zu verwenden.\n\n:::\n\n1. **Liegen ungültige Messungen vor?**\n\n### Auf Ausreißer prüfen\nAuf Ausreißer kann (unter anderem) mit studentisierten z-Werten und grafisch geprüft werden.\n\n::: {.panel-tabset}\n\n## Ausreißer bestimmen\n1. Anzahl der Ausreißer bestimmen und Position ausgeben.\n\n::: {.cell execution_count=14}\n``` {.python .cell-code}\n# z-Werte größer gleich abs(3) finden\n## Lösung für SciPy 1.14.1 (gibt pd.Series zurück)\n## z_values_ge3_sum = hooke.groupby(by = ['Team', 'Gewicht'])['Abstand'].apply(lambda x: scipy.stats.zscore(x, ddof = 1)).abs().ge(3).sum()\n\n## Lösung für SciPy 1.15 und neuer (gibt np.array zurück)\nz_values_ge3_sum = hooke.groupby(by = ['Team', 'Gewicht'], sort = False)['Abstand'].apply(scipy.stats.zscore, ddof = 1).apply(np.abs).apply(lambda x: np.greater_equal(x, 3)).apply(sum).sum()\n\nprint(\"Anzahl der studentisierten z-Werte mit Betrag ≥ 3:\", z_values_ge3_sum, \"\\n\")\n\n# z-Werte größer gleich abs(2.5) finden\n## Lösung für SciPy 1.14.1 (gibt pd.Series zurück)\n## z_values_ge25_sum = hooke.groupby(by = ['Team', 'Gewicht'])['Abstand'].apply(lambda x: scipy.stats.zscore(x, ddof = 1)).abs().ge(2.5).sum()\n\n## Lösung für SciPy 1.15 und neuer (gibt np.array zurück)\nz_values_ge25_sum = hooke.groupby(by = ['Team', 'Gewicht'], sort = False)['Abstand'].apply(scipy.stats.zscore, ddof = 1).apply(np.abs).apply(lambda x: np.greater_equal(x, 2.5)).apply(sum).sum()\nprint(\"Anzahl der studentisierten z-Werte mit Betrag ≥ 2.5:\", z_values_ge25_sum)\n\n# Die Zeilen mit z-Werten größer abs(2.5) ausgeben\n## Lösung für SciPy 1.14.1 (gibt pd.Series zurück)\n## bool_index = hooke.groupby(by = ['Team', 'Gewicht'])['Abstand'].apply(lambda x: scipy.stats.zscore(x, ddof = 1)).abs().ge(2.5).values\n\n## Lösung für SciPy 1.15 und neuer (gibt np.array zurück)\n### Schritt 1: Wahrheitswerte abgreifen\nbool_index = hooke.groupby(by = ['Team', 'Gewicht'], sort = False)['Abstand'].apply(scipy.stats.zscore, ddof = 1).apply(np.abs).apply(lambda x: np.greater_equal(x, 2.5)).values\n### Schritt 2: Rückgabe in ein eindimensionales Array überführen: \nbool_index = np.hstack(bool_index)\n\nprint(\"\\nAn diesen Indexpositionen liegen die Ausreißer:\", np.nonzero(bool_index))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAnzahl der studentisierten z-Werte mit Betrag ≥ 3: 0 \n\nAnzahl der studentisierten z-Werte mit Betrag ≥ 2.5: 4\n\nAn diesen Indexpositionen liegen die Ausreißer: (array([156, 298, 313, 318]),)\n```\n:::\n:::\n\n\n2. Ausgabe der Zeilen aus den Messreihen\n\n::: {.cell execution_count=15}\n``` {.python .cell-code}\n# Auswahl der Zeilen mit den z-Werten größer gleich 2.5\nz_values_ge_25 = hooke.iloc[bool_index , :] # --> Hier muss das Problem liegen\nprint(z_values_ge_25, \"\\n\")\n\n# Kombinationen aus Gewicht & Team bestimmen\nprint(\"Kombinationen aus Gewicht & Team bestimmen\")\nteams = z_values_ge_25['Team'].unique()\n\n## teams durchlaufen und jeweils die Gewichte speichern\nteam_gewichte = [] # leere liste\nfor i in range(len(teams)):\n  print(teams[i])\n  print(z_values_ge_25.loc[z_values_ge_25['Team'] == teams[i], 'Gewicht'], \"\\n\")\n  team_gewichte.append(z_values_ge_25.loc[z_values_ge_25['Team'] == teams[i], 'Gewicht'].values)\n\n# print(\"Als Liste von arrays:\")\n# print(team_gewichte, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         Zeit  Abstand  Gewicht              Team\n159  09:27:18   102.30    201.0              fabi\n301  11:10:38   102.35    250.0  die_ahnungslosen\n316  11:11:42   104.15    300.0  die_ahnungslosen\n321  11:12:43   101.06    350.0  die_ahnungslosen \n\nKombinationen aus Gewicht & Team bestimmen\nfabi\n159    201.0\nName: Gewicht, dtype: float64 \n\ndie_ahnungslosen\n301    250.0\n316    300.0\n321    350.0\nName: Gewicht, dtype: float64 \n\n```\n:::\n:::\n\n\n## Gemeinsame Ausgabe der Messreihen\nDiese Ausgabe dient der Veranschaulichung und Kontrolle.\n\n::: {.cell execution_count=16}\n``` {.python .cell-code}\n# Messreihen auswählen\nmessreihen = pd.DataFrame()\nfor i in range(len(teams)):\n  for j in range(len(team_gewichte[i])):\n\n    print(teams[i], team_gewichte[i][j])\n\n    messreihen = pd.concat([messreihen, hooke.loc[ (hooke['Team'] == teams[i]) & (hooke['Gewicht'] == team_gewichte[i][j]) ]])\n\n# studentisierte z-Werte der Messreihen bilden\n## Lösung für SciPy 1.14.1 (gibt pd.Series zurück)\n## messreihen_z_scores = messreihen.groupby(by = ['Team', 'Gewicht'])['Abstand'].apply(lambda x: scipy.stats.zscore(x, ddof = 1)).reset_index(drop = True)\n\n## Lösung für SciPy 1.15 und neuer (gibt np.array zurück)\n## Rückgabe zeilenweise in ein eindimensionales Array überführen: \nmessreihen_z_scores = np.hstack(messreihen.groupby(by = ['Team', 'Gewicht'], sort = False)['Abstand'].apply(lambda x: scipy.stats.zscore(x, ddof = 1)).reset_index(drop = True))\n\n# gemeinsame Ausgabe der Daten\n## Lösung für SciPy 1.14.1 (gibt pd.Series zurück)\n## messreihen.insert(loc = 2, column = 'z-Werte Abstand', value = messreihen_z_scores.values)\n\n## Lösung für SciPy 1.15 und neuer (gibt np.array zurück)\nmessreihen.insert(loc = 2, column = 'z-Werte Abstand', value = messreihen_z_scores)\nprint(messreihen)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nfabi 201.0\ndie_ahnungslosen 250.0\ndie_ahnungslosen 300.0\ndie_ahnungslosen 350.0\n         Zeit  Abstand  z-Werte Abstand  Gewicht              Team\n156  09:27:09   105.47         0.206192    201.0              fabi\n157  09:27:12   105.90         0.614776    201.0              fabi\n158  09:27:15   105.54         0.272706    201.0              fabi\n159  09:27:18   102.30        -2.805925    201.0              fabi\n160  09:27:21   105.90         0.614776    201.0              fabi\n161  09:27:24   105.47         0.206192    201.0              fabi\n162  09:27:27   105.44         0.177686    201.0              fabi\n163  09:27:30   105.59         0.320216    201.0              fabi\n164  09:27:33   105.46         0.196690    201.0              fabi\n165  09:27:36   105.46         0.196690    201.0              fabi\n292  11:10:11   102.99         0.376191    250.0  die_ahnungslosen\n293  11:10:13   102.99         0.376191    250.0  die_ahnungslosen\n294  11:10:17   102.93         0.105333    250.0  die_ahnungslosen\n295  11:10:20   102.83        -0.346095    250.0  die_ahnungslosen\n296  11:10:23   103.16         1.143620    250.0  die_ahnungslosen\n297  11:10:26   102.80        -0.481524    250.0  die_ahnungslosen\n298  11:10:29   102.90        -0.030095    250.0  die_ahnungslosen\n299  11:10:32   103.33         1.911049    250.0  die_ahnungslosen\n300  11:10:35   102.78        -0.571810    250.0  die_ahnungslosen\n301  11:10:38   102.35        -2.512954    250.0  die_ahnungslosen\n302  11:10:41   102.93         0.105333    250.0  die_ahnungslosen\n303  11:10:44   102.88        -0.120381    250.0  die_ahnungslosen\n304  11:10:47   102.90        -0.030095    250.0  die_ahnungslosen\n305  11:10:50   102.88        -0.120381    250.0  die_ahnungslosen\n306  11:10:53   102.73        -0.797524    250.0  die_ahnungslosen\n307  11:10:56   102.81        -0.436381    250.0  die_ahnungslosen\n308  11:10:59   102.80        -0.481524    250.0  die_ahnungslosen\n309  11:11:02   103.33         1.911049    250.0  die_ahnungslosen\n310  11:11:24   101.37        -0.525397    300.0  die_ahnungslosen\n311  11:11:27   101.43        -0.458325    300.0  die_ahnungslosen\n312  11:11:30   102.80         1.073152    300.0  die_ahnungslosen\n313  11:11:33   101.72        -0.134144    300.0  die_ahnungslosen\n314  11:11:36   101.36        -0.536576    300.0  die_ahnungslosen\n315  11:11:39   101.46        -0.424789    300.0  die_ahnungslosen\n316  11:11:42   104.15         2.582271    300.0  die_ahnungslosen\n317  11:11:45   101.36        -0.536576    300.0  die_ahnungslosen\n318  11:11:48   101.00        -0.939008    300.0  die_ahnungslosen\n319  11:11:51   101.91         0.078251    300.0  die_ahnungslosen\n320  11:11:54   101.68        -0.178859    300.0  die_ahnungslosen\n321  11:12:43   101.06         2.992196    350.0  die_ahnungslosen\n323  11:12:46   100.17        -0.354551    350.0  die_ahnungslosen\n324  11:12:49    99.98        -1.069025    350.0  die_ahnungslosen\n325  11:12:52   100.07        -0.730590    350.0  die_ahnungslosen\n326  11:12:55   100.21        -0.204135    350.0  die_ahnungslosen\n327  11:12:58   100.21        -0.204135    350.0  die_ahnungslosen\n328  11:13:01   100.14        -0.467363    350.0  die_ahnungslosen\n329  11:13:04   100.17        -0.354551    350.0  die_ahnungslosen\n330  11:13:07   100.28         0.059092    350.0  die_ahnungslosen\n331  11:13:10   100.55         1.074397    350.0  die_ahnungslosen\n332  11:13:13   100.14        -0.467363    350.0  die_ahnungslosen\n333  11:13:16   100.17        -0.354551    350.0  die_ahnungslosen\n334  11:13:19   100.17        -0.354551    350.0  die_ahnungslosen\n335  11:13:22   100.38         0.435131    350.0  die_ahnungslosen\n```\n:::\n:::\n\n\n:::\n\nDie Werte können mit der Pandas-Methode `pd.plot()` mit wenig Aufwand dargestellt werden. Die Methode ist jedoch nicht so flexibel, wie das Paket matplotlib. So ist das Punktdiagramm (`kind = 'scatter'`) nur für DataFrames, nicht aber für groupby-Objekte verfügbar. Dies wird durch das Setzen eines Markers und die Einstellung der Liniendicke auf 0 kompensiert.\n\n::: {.cell execution_count=17}\n``` {.python .cell-code}\nmessreihen.reset_index(drop = True).groupby(by = ['Team', 'Gewicht'], sort = False)['Abstand'].plot(marker = 'o', lw = 0)\n\nplt.xlabel('Messwert')\nplt.ylabel('Abstand')\nplt.legend()\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](übung-hooke_files/figure-pdf/cell-18-output-1.png){fig-alt='Grafische Darstellung der Messreihen, die studentisierte z-Werte >= 2,5 enthalten.' fig-pos='H'}\n:::\n:::\n\n\n&nbsp;\n\nDie Werte, die betragsmäßig studentisierte z-Werte $\\ge$ 2,5 aufweisen, könnten als Ausreißer entfernt werden. In diesem Fall wird darauf verzichtet.\n\n### Umwandlung der Rechengrößen\nIm nächsten Schritt wird die Abstandsmessung auf den Nullpunkt normiert, um die Federausdehnung abzubilden. Ebenso wird das Gewicht in $g$ in die wirkende Kraft in \n$N$ umgerechnet.\n\n::: {#tip-einheiten .callout-tip collapse=\"true\"}\n## Musterlösung\n\n#### Abstandsmessung auf Meter und auf den Nullpunkt normieren\nAbstandsmessung auf den Nullpunkt normieren. Die Spalte Abstand wird in Abständsänderung umbenannt.\n\n::: {.cell execution_count=18}\n``` {.python .cell-code}\nnullpunkte = hooke.loc[hooke['Gewicht'] == 0, : ].groupby(by = 'Team', sort = False)['Abstand'].mean()\n\nprint(\"Nullpunkte\", nullpunkte, sep = '\\n')\n\nteams = nullpunkte.index\n\nfor i in range(len(teams)):\n\n  hooke.loc[hooke['Team'] == teams[i] , 'Abstand'] = hooke.loc[hooke['Team'] == teams[i] , 'Abstand'].sub(nullpunkte.values[i]).mul(-1)\n\nhooke.rename(columns = {'Abstand': 'Abstandsänderung'}, inplace = True)\nhooke['Abstandsänderung'] = hooke['Abstandsänderung'].div(100)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNullpunkte\nTeam\nkreativkoepfe       109.676667\nfabi                110.366000\ndie_ahnungslosen    109.759000\nma                  109.258000\nName: Abstand, dtype: float64\n```\n:::\n:::\n\n\n#### Gewicht in wirkende Kraft umrechnen\nGewicht in $g$ in die wirkende Kraft in $N$ umrechnen. Die Spalte wird in den Datensatz eingefügt.\n\n::: {.cell execution_count=19}\n``` {.python .cell-code}\nhooke['Kraft'] = hooke['Gewicht'].div(1000).mul(9.81)\n```\n:::\n\n\n:::\n\nDas Ergebnis könnte so aussehen. Die Spalte Abstand wurde in Abständsänderung umbenannt.\n\n::: {.cell execution_count=20}\n``` {.python .cell-code}\nhooke.groupby(by = ['Team', 'Kraft'], sort = False)['Abstandsänderung'].describe()\n```\n\n::: {.cell-output .cell-output-display execution_count=20}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th></th>\n      <th>count</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>min</th>\n      <th>25%</th>\n      <th>50%</th>\n      <th>75%</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>Team</th>\n      <th>Kraft</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th rowspan=\"12\" valign=\"top\">kreativkoepfe</th>\n      <th>0.00000</th>\n      <td>9.0</td>\n      <td>7.894196e-17</td>\n      <td>0.000536</td>\n      <td>-0.000633</td>\n      <td>-0.000533</td>\n      <td>0.000367</td>\n      <td>0.000367</td>\n      <td>0.000567</td>\n    </tr>\n    <tr>\n      <th>0.49050</th>\n      <td>8.0</td>\n      <td>1.119167e-02</td>\n      <td>0.004899</td>\n      <td>0.003467</td>\n      <td>0.008092</td>\n      <td>0.011817</td>\n      <td>0.014442</td>\n      <td>0.018367</td>\n    </tr>\n    <tr>\n      <th>0.98100</th>\n      <td>10.0</td>\n      <td>2.583667e-02</td>\n      <td>0.009227</td>\n      <td>0.005667</td>\n      <td>0.024067</td>\n      <td>0.028017</td>\n      <td>0.032967</td>\n      <td>0.033767</td>\n    </tr>\n    <tr>\n      <th>1.47150</th>\n      <td>10.0</td>\n      <td>3.742667e-02</td>\n      <td>0.006000</td>\n      <td>0.028367</td>\n      <td>0.033692</td>\n      <td>0.036567</td>\n      <td>0.040642</td>\n      <td>0.048067</td>\n    </tr>\n    <tr>\n      <th>1.96200</th>\n      <td>10.0</td>\n      <td>4.223667e-02</td>\n      <td>0.016183</td>\n      <td>0.014067</td>\n      <td>0.029067</td>\n      <td>0.046417</td>\n      <td>0.056017</td>\n      <td>0.061567</td>\n    </tr>\n    <tr>\n      <th>2.45250</th>\n      <td>10.0</td>\n      <td>7.149667e-02</td>\n      <td>0.007962</td>\n      <td>0.057867</td>\n      <td>0.069142</td>\n      <td>0.072667</td>\n      <td>0.075067</td>\n      <td>0.085767</td>\n    </tr>\n    <tr>\n      <th>2.94300</th>\n      <td>10.0</td>\n      <td>8.440667e-02</td>\n      <td>0.007021</td>\n      <td>0.072267</td>\n      <td>0.078417</td>\n      <td>0.086667</td>\n      <td>0.089142</td>\n      <td>0.093867</td>\n    </tr>\n    <tr>\n      <th>3.43350</th>\n      <td>10.0</td>\n      <td>1.087267e-01</td>\n      <td>0.014716</td>\n      <td>0.088367</td>\n      <td>0.093167</td>\n      <td>0.115217</td>\n      <td>0.121042</td>\n      <td>0.122467</td>\n    </tr>\n    <tr>\n      <th>3.92400</th>\n      <td>9.0</td>\n      <td>1.284889e-01</td>\n      <td>0.010368</td>\n      <td>0.108967</td>\n      <td>0.122667</td>\n      <td>0.127767</td>\n      <td>0.137867</td>\n      <td>0.138767</td>\n    </tr>\n    <tr>\n      <th>4.41450</th>\n      <td>9.0</td>\n      <td>1.416111e-01</td>\n      <td>0.011160</td>\n      <td>0.124367</td>\n      <td>0.138467</td>\n      <td>0.139267</td>\n      <td>0.150467</td>\n      <td>0.157667</td>\n    </tr>\n    <tr>\n      <th>4.90500</th>\n      <td>8.0</td>\n      <td>1.434042e-01</td>\n      <td>0.015643</td>\n      <td>0.119867</td>\n      <td>0.131142</td>\n      <td>0.145367</td>\n      <td>0.152192</td>\n      <td>0.163767</td>\n    </tr>\n    <tr>\n      <th>5.39550</th>\n      <td>9.0</td>\n      <td>1.652111e-01</td>\n      <td>0.003530</td>\n      <td>0.159167</td>\n      <td>0.162767</td>\n      <td>0.167267</td>\n      <td>0.168067</td>\n      <td>0.169167</td>\n    </tr>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">fabi</th>\n      <th>0.00000</th>\n      <td>10.0</td>\n      <td>1.137111e-16</td>\n      <td>0.002537</td>\n      <td>-0.003740</td>\n      <td>-0.002140</td>\n      <td>0.000560</td>\n      <td>0.000760</td>\n      <td>0.004160</td>\n    </tr>\n    <tr>\n      <th>0.49050</th>\n      <td>12.0</td>\n      <td>-5.983333e-04</td>\n      <td>0.002110</td>\n      <td>-0.004040</td>\n      <td>-0.002565</td>\n      <td>0.000560</td>\n      <td>0.000610</td>\n      <td>0.001460</td>\n    </tr>\n    <tr>\n      <th>0.99081</th>\n      <td>9.0</td>\n      <td>2.127111e-02</td>\n      <td>0.002312</td>\n      <td>0.018960</td>\n      <td>0.019460</td>\n      <td>0.019560</td>\n      <td>0.023760</td>\n      <td>0.024060</td>\n    </tr>\n    <tr>\n      <th>1.49112</th>\n      <td>10.0</td>\n      <td>3.464000e-02</td>\n      <td>0.003357</td>\n      <td>0.029360</td>\n      <td>0.033710</td>\n      <td>0.033860</td>\n      <td>0.037660</td>\n      <td>0.039160</td>\n    </tr>\n    <tr>\n      <th>1.97181</th>\n      <td>10.0</td>\n      <td>5.113000e-02</td>\n      <td>0.010524</td>\n      <td>0.044660</td>\n      <td>0.047885</td>\n      <td>0.048960</td>\n      <td>0.049060</td>\n      <td>0.080660</td>\n    </tr>\n    <tr>\n      <th>2.48193</th>\n      <td>11.0</td>\n      <td>6.086909e-02</td>\n      <td>0.004660</td>\n      <td>0.054560</td>\n      <td>0.057060</td>\n      <td>0.062660</td>\n      <td>0.064260</td>\n      <td>0.068160</td>\n    </tr>\n    <tr>\n      <th>2.96262</th>\n      <td>12.0</td>\n      <td>7.716000e-02</td>\n      <td>0.003909</td>\n      <td>0.070160</td>\n      <td>0.073560</td>\n      <td>0.078060</td>\n      <td>0.079010</td>\n      <td>0.082760</td>\n    </tr>\n    <tr>\n      <th>3.46293</th>\n      <td>11.0</td>\n      <td>9.692364e-02</td>\n      <td>0.001996</td>\n      <td>0.093360</td>\n      <td>0.095860</td>\n      <td>0.097860</td>\n      <td>0.098160</td>\n      <td>0.098660</td>\n    </tr>\n    <tr>\n      <th>3.95343</th>\n      <td>14.0</td>\n      <td>1.091886e-01</td>\n      <td>0.004248</td>\n      <td>0.101060</td>\n      <td>0.107760</td>\n      <td>0.109560</td>\n      <td>0.112635</td>\n      <td>0.113960</td>\n    </tr>\n    <tr>\n      <th>4.46355</th>\n      <td>11.0</td>\n      <td>1.252691e-01</td>\n      <td>0.002281</td>\n      <td>0.122160</td>\n      <td>0.123310</td>\n      <td>0.124860</td>\n      <td>0.127460</td>\n      <td>0.128560</td>\n    </tr>\n    <tr>\n      <th rowspan=\"10\" valign=\"top\">die_ahnungslosen</th>\n      <th>0.00000</th>\n      <td>10.0</td>\n      <td>-1.420088e-16</td>\n      <td>0.001807</td>\n      <td>-0.003310</td>\n      <td>-0.000335</td>\n      <td>0.000290</td>\n      <td>0.001290</td>\n      <td>0.002090</td>\n    </tr>\n    <tr>\n      <th>0.49050</th>\n      <td>8.0</td>\n      <td>8.465000e-03</td>\n      <td>0.001809</td>\n      <td>0.006490</td>\n      <td>0.007340</td>\n      <td>0.008290</td>\n      <td>0.008790</td>\n      <td>0.012290</td>\n    </tr>\n    <tr>\n      <th>0.98100</th>\n      <td>12.0</td>\n      <td>2.033167e-02</td>\n      <td>0.007044</td>\n      <td>0.008390</td>\n      <td>0.016865</td>\n      <td>0.020240</td>\n      <td>0.025615</td>\n      <td>0.029990</td>\n    </tr>\n    <tr>\n      <th>1.47150</th>\n      <td>19.0</td>\n      <td>3.493211e-02</td>\n      <td>0.007595</td>\n      <td>0.018890</td>\n      <td>0.030490</td>\n      <td>0.036390</td>\n      <td>0.040540</td>\n      <td>0.050890</td>\n    </tr>\n    <tr>\n      <th>1.96200</th>\n      <td>18.0</td>\n      <td>5.142889e-02</td>\n      <td>0.003930</td>\n      <td>0.045290</td>\n      <td>0.049440</td>\n      <td>0.051690</td>\n      <td>0.054940</td>\n      <td>0.057990</td>\n    </tr>\n    <tr>\n      <th>2.45250</th>\n      <td>18.0</td>\n      <td>6.852333e-02</td>\n      <td>0.002215</td>\n      <td>0.064290</td>\n      <td>0.067840</td>\n      <td>0.068690</td>\n      <td>0.069565</td>\n      <td>0.074090</td>\n    </tr>\n    <tr>\n      <th>2.94300</th>\n      <td>11.0</td>\n      <td>7.919000e-02</td>\n      <td>0.008946</td>\n      <td>0.056090</td>\n      <td>0.079440</td>\n      <td>0.082990</td>\n      <td>0.083940</td>\n      <td>0.087590</td>\n    </tr>\n    <tr>\n      <th>3.43350</th>\n      <td>14.0</td>\n      <td>9.494714e-02</td>\n      <td>0.002659</td>\n      <td>0.086990</td>\n      <td>0.094965</td>\n      <td>0.095890</td>\n      <td>0.096115</td>\n      <td>0.097790</td>\n    </tr>\n    <tr>\n      <th>3.92400</th>\n      <td>11.0</td>\n      <td>1.051991e-01</td>\n      <td>0.002328</td>\n      <td>0.101890</td>\n      <td>0.103440</td>\n      <td>0.106290</td>\n      <td>0.107090</td>\n      <td>0.108190</td>\n    </tr>\n    <tr>\n      <th>4.41450</th>\n      <td>12.0</td>\n      <td>1.171650e-01</td>\n      <td>0.004680</td>\n      <td>0.106790</td>\n      <td>0.114740</td>\n      <td>0.117890</td>\n      <td>0.120840</td>\n      <td>0.122490</td>\n    </tr>\n    <tr>\n      <th rowspan=\"18\" valign=\"top\">ma</th>\n      <th>0.00000</th>\n      <td>10.0</td>\n      <td>-7.105997e-17</td>\n      <td>0.000424</td>\n      <td>-0.000520</td>\n      <td>-0.000220</td>\n      <td>-0.000020</td>\n      <td>-0.000020</td>\n      <td>0.000780</td>\n    </tr>\n    <tr>\n      <th>0.49050</th>\n      <td>10.0</td>\n      <td>2.079000e-02</td>\n      <td>0.018096</td>\n      <td>-0.015520</td>\n      <td>0.013005</td>\n      <td>0.030730</td>\n      <td>0.031705</td>\n      <td>0.034280</td>\n    </tr>\n    <tr>\n      <th>0.98100</th>\n      <td>10.0</td>\n      <td>7.157000e-02</td>\n      <td>0.029588</td>\n      <td>0.025880</td>\n      <td>0.047755</td>\n      <td>0.081380</td>\n      <td>0.095855</td>\n      <td>0.098880</td>\n    </tr>\n    <tr>\n      <th>1.47150</th>\n      <td>11.0</td>\n      <td>2.601636e-02</td>\n      <td>0.047280</td>\n      <td>-0.013420</td>\n      <td>-0.009020</td>\n      <td>-0.004720</td>\n      <td>0.082680</td>\n      <td>0.089680</td>\n    </tr>\n    <tr>\n      <th>1.96200</th>\n      <td>9.0</td>\n      <td>8.013333e-03</td>\n      <td>0.016668</td>\n      <td>-0.018020</td>\n      <td>-0.009120</td>\n      <td>0.015180</td>\n      <td>0.019680</td>\n      <td>0.025180</td>\n    </tr>\n    <tr>\n      <th>2.45250</th>\n      <td>10.0</td>\n      <td>2.327000e-02</td>\n      <td>0.009578</td>\n      <td>0.014580</td>\n      <td>0.015605</td>\n      <td>0.017180</td>\n      <td>0.033255</td>\n      <td>0.035980</td>\n    </tr>\n    <tr>\n      <th>2.94300</th>\n      <td>10.0</td>\n      <td>3.562000e-02</td>\n      <td>0.001944</td>\n      <td>0.033180</td>\n      <td>0.033930</td>\n      <td>0.035430</td>\n      <td>0.037505</td>\n      <td>0.037980</td>\n    </tr>\n    <tr>\n      <th>3.43350</th>\n      <td>10.0</td>\n      <td>4.420000e-02</td>\n      <td>0.005309</td>\n      <td>0.033180</td>\n      <td>0.041105</td>\n      <td>0.045730</td>\n      <td>0.047430</td>\n      <td>0.051580</td>\n    </tr>\n    <tr>\n      <th>3.92400</th>\n      <td>10.0</td>\n      <td>4.468000e-02</td>\n      <td>0.006030</td>\n      <td>0.031680</td>\n      <td>0.045655</td>\n      <td>0.047080</td>\n      <td>0.047805</td>\n      <td>0.049480</td>\n    </tr>\n    <tr>\n      <th>4.41450</th>\n      <td>10.0</td>\n      <td>4.741000e-02</td>\n      <td>0.004755</td>\n      <td>0.036980</td>\n      <td>0.045455</td>\n      <td>0.047480</td>\n      <td>0.050355</td>\n      <td>0.053480</td>\n    </tr>\n    <tr>\n      <th>4.90500</th>\n      <td>10.0</td>\n      <td>4.802000e-02</td>\n      <td>0.005691</td>\n      <td>0.035480</td>\n      <td>0.046180</td>\n      <td>0.048380</td>\n      <td>0.051655</td>\n      <td>0.056080</td>\n    </tr>\n    <tr>\n      <th>5.39550</th>\n      <td>10.0</td>\n      <td>6.254000e-02</td>\n      <td>0.008005</td>\n      <td>0.050580</td>\n      <td>0.057580</td>\n      <td>0.061930</td>\n      <td>0.064930</td>\n      <td>0.077080</td>\n    </tr>\n    <tr>\n      <th>5.88600</th>\n      <td>10.0</td>\n      <td>7.855000e-02</td>\n      <td>0.006212</td>\n      <td>0.073180</td>\n      <td>0.074780</td>\n      <td>0.076780</td>\n      <td>0.077580</td>\n      <td>0.090380</td>\n    </tr>\n    <tr>\n      <th>6.37650</th>\n      <td>10.0</td>\n      <td>9.149000e-02</td>\n      <td>0.000825</td>\n      <td>0.090480</td>\n      <td>0.090705</td>\n      <td>0.091480</td>\n      <td>0.092105</td>\n      <td>0.092880</td>\n    </tr>\n    <tr>\n      <th>6.86700</th>\n      <td>10.0</td>\n      <td>1.038700e-01</td>\n      <td>0.005342</td>\n      <td>0.092380</td>\n      <td>0.100730</td>\n      <td>0.105430</td>\n      <td>0.107155</td>\n      <td>0.110180</td>\n    </tr>\n    <tr>\n      <th>7.35750</th>\n      <td>9.0</td>\n      <td>1.129133e-01</td>\n      <td>0.007293</td>\n      <td>0.104880</td>\n      <td>0.105780</td>\n      <td>0.112780</td>\n      <td>0.117580</td>\n      <td>0.123980</td>\n    </tr>\n    <tr>\n      <th>7.84800</th>\n      <td>11.0</td>\n      <td>1.214255e-01</td>\n      <td>0.005402</td>\n      <td>0.115380</td>\n      <td>0.117530</td>\n      <td>0.119280</td>\n      <td>0.125580</td>\n      <td>0.130680</td>\n    </tr>\n    <tr>\n      <th>8.33850</th>\n      <td>8.0</td>\n      <td>1.354300e-01</td>\n      <td>0.002458</td>\n      <td>0.131880</td>\n      <td>0.133805</td>\n      <td>0.135080</td>\n      <td>0.136955</td>\n      <td>0.139080</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Grafische Darstellung\nDa es nur vier Teams gibt, können die Messreihen grafisch dargestellt werden. Eine mögliche Darstellung können Sie dem ersten Reiter, die Zwischenschritte und Schlussfolgerungen den folgenden Reitern entnehmen.\n\n::: {.panel-tabset}\n\n## Grafische Darstellung\n\n::: {.cell execution_count=21}\n\n::: {.cell-output .cell-output-display}\n![](übung-hooke_files/figure-pdf/cell-22-output-1.png){fig-alt='Auf der x-Achse ist die Federausdehnung in m, auf der y-Achse die wirkende Kraft in N abgetragen. Zusätzlich zu den Messpunkten sind für jedes Gewicht der Mittelwert mit einem großen X und von dessen Mittelpunkt ausgehend der Bereich des Mittelwerts ± 1 Standardfehler eingezeichnet.'}\n:::\n:::\n\n\n## Mittelwerte und Standardfehler berechnen\nDie Ausgabe ist aus Platzgründen auf die ersten Zeilen beschränkt.\n\n::: {.cell execution_count=22}\n\n::: {.cell-output .cell-output-stdout}\n```\nMittelwerte der Abstandsänderung nach Team und Kraft:\nTeam           Kraft \nkreativkoepfe  0.0000    7.895401e-17\n               0.4905    1.119167e-02\n               0.9810    2.583667e-02\n               1.4715    3.742667e-02\n               1.9620    4.223667e-02\nName: Federausdehnung, dtype: float64\n\nStandardfehler der Mittelwerte nach Team und Kraft\nTeam           Kraft \nkreativkoepfe  0.0000    0.000179\n               0.4905    0.001732\n               0.9810    0.002918\n               1.4715    0.001897\n               1.9620    0.005117\nName: Standardfehler, dtype: float64\n```\n:::\n:::\n\n\n## Code\n\n::: {.cell execution_count=23}\n``` {.python .cell-code}\n# Mittelwerte der Teams nach Kraft\ndistance_means_by_team_and_force = hooke.groupby(by = [hooke['Team'], hooke['Kraft']], sort = False)['Abstandsänderung'].mean()\ndistance_means_by_team_and_force.name = 'Federausdehnung'\n\nprint(\"Mittelwerte der Abstandsänderung nach Team und Kraft:\", distance_means_by_team_and_force.head(), sep = '\\n')\n\nprint() # leere Zeile\n\n# Standardfehler der Teams nach Kraft\ndistance_stderrors_by_team_and_force = hooke.groupby(by = [hooke['Team'], hooke['Kraft']], sort = False)['Abstandsänderung'].std(ddof = 1).div(np.sqrt(hooke['Abstandsänderung'].groupby(by = [hooke['Team'], hooke['Kraft']], sort = False).size()))\ndistance_stderrors_by_team_and_force.name = 'Standardfehler'\n\nprint(\"Standardfehler der Mittelwerte nach Team und Kraft\", distance_stderrors_by_team_and_force.head(), sep = '\\n')\n\n# grafische Darstellung\nanzahl_teams = hooke['Team'].unique().size\n\nplt.figure(figsize = (7.5, 12))\nfor i in range(anzahl_teams):\n  \n  plt.subplot(4, 1, i + 1) # plt.subplot zählt ab 1\n\n  # Punktdiagramm\n  plotting_data = hooke.loc[hooke['Team'] == hooke['Team'].unique()[i], :]\n  plt.scatter(x = plotting_data['Abstandsänderung'], y = plotting_data['Kraft'], alpha = 0.6)\n\n  plt.title(label = hooke['Team'].unique()[i])\n  plt.xlabel(\"Federausdehnung in m\")\n  plt.ylabel(\"wirkende Kraft in N\")\n\n  # # Fehlerbalken\n  distance_means_by_force = plotting_data.groupby(by = plotting_data['Kraft'], sort = False)['Abstandsänderung'].mean()\n  distance_stderrors_by_force = plotting_data.groupby(by = plotting_data['Kraft'], sort = False)['Abstandsänderung'].std(ddof = 1).div(np.sqrt(plotting_data['Abstandsänderung'].groupby(by = plotting_data['Kraft'], sort = False).size()))\n\n  errorbar_container = plt.errorbar(x = distance_means_by_force, y = distance_means_by_force.index, xerr = distance_stderrors_by_force,\n  linestyle = 'none', marker = 'x', color = 'black', markersize = 12, elinewidth = 3, ecolor = 'red', capsize = 12)\n\n  # siehe: https://matplotlib.org/stable/api/container_api.html#matplotlib.container.ErrorbarContainer\n  plt.legend([errorbar_container.lines[0], errorbar_container.lines[2][0]],\n             ['Mittelwert', 'Standardfehler'],\n             loc = 'upper left')\n\nplt.tight_layout()\nplt.show()\n```\n:::\n\n\n## Auswertung\n\n- Die Messreihen des Teams die_ahnungslosen entsprechen dem erwarteten linearen Trend.\n- Bei Team fabi scheint für das erste angehängte Gewicht (50 Gramm) ein Fehler bei der Datenerhebung vorzuliegen. Vermutlich wurde hier mit 0 Gramm gemessen.\n- Die Messreihen des Teams kreativköpfe entsprechen weitgehend dem erwarteten linearen Trend.\n- Die Messreihen des Teams ma scheinen wenigstens für die ersten vier angehängten Gewichten durch grobe Messfehler geprägt zu sein.\n\nDie Messreihe des Teams ma wird wegen grober Messfehler aus dem Datensatz entfernt. Aus der Messreihe des Teams fabi wird die Messung für das Gewicht 50 Gramm entfernt.\n\n::: {.cell execution_count=24}\n``` {.python .cell-code}\nhooke.drop(index = hooke.loc[hooke['Team'] == 'ma', :].index, inplace = True)\nhooke.drop(index = hooke.loc[(hooke['Team'] == 'fabi') & (hooke['Gewicht'] == 50), :].index, inplace = True)\n```\n:::\n\n\n:::\n\n&nbsp;\n\n::: {#tip-vieledatensätze .callout-tip}\n## Vorgehen bei vielen Datensätzen\nBei einer großen Anzahl an Datensätzen kann auch die grafische Kontrolle an Grenzen stoßen. In diesem Fall empfiehlt es sich, die visuellen und kennzahlenbasierten Methoden zusammen zu nutzen, um Muster zu identifizieren und für eine große Zahl von Messungen zu überprüfen. Beispielsweise könnten nach einer visuellen Inspektion von Messreihen mit Extremwerten bzw. Ausreißern alle Messreihen daraufhin überprüft werden, ob mit zunehmenden Gewicht stets auch die mittlere Federausdehnung größer als für leichtere Gewichte ist. Abweichende Messreihen könnten dann grafisch kontrolliert werden.\n:::\n\n## Musterlösung Federkonstanten bestimmen {#sec-lösung-federkonstanten}\nIm nächsten Schritt können die Federkonstanten mittels linearer Regression bestimmt werden. \n\n2. **Welche Werte können für die Federkonstanten ermittelt werden?**  \n3. **Wurden die Messungen mit der gleichen Feder durchgeführt, wenn als Vertrauenswahrscheinlichkeit 90 % bzw. 95 % angenommen werden soll?**\n\n::: {.panel-tabset}\n## $\\alpha = 0.10$\n\n::: {.cell execution_count=25}\n\n::: {.cell-output .cell-output-stdout}\n```\n\nkreativkoepfe Konfidenzniveau: 0.9\ny = 0.3180 + 29.7643 * x\nr = 0.9773 R2 = 0.9552 p = 0.0000\nStandardfehler des Anstiegs: 0.6148\n28.744  ≤ 29.764 ≤ 30.784\n\nfabi Konfidenzniveau: 0.9\ny = 0.2373 + 34.1048 * x\nr = 0.9907 R2 = 0.9814 p = 0.0000\nStandardfehler des Anstiegs: 0.4792\n33.309  ≤ 34.105 ≤ 34.901\n\ndie_ahnungslosen Konfidenzniveau: 0.9\ny = 0.1798 + 34.9183 * x\nr = 0.9886 R2 = 0.9773 p = 0.0000\nStandardfehler des Anstiegs: 0.4651\n34.148  ≤ 34.918 ≤ 35.689\n```\n:::\n:::\n\n\n## $\\alpha = 0.05$\n\n::: {.cell execution_count=26}\n\n::: {.cell-output .cell-output-stdout}\n```\n\nkreativkoepfe Konfidenzniveau: 0.95\ny = 0.3180 + 29.7643 * x\nr = 0.9773 R2 = 0.9552 p = 0.0000\nStandardfehler des Anstiegs: 0.6148\n28.546  ≤ 29.764 ≤ 30.983\n\nfabi Konfidenzniveau: 0.95\ny = 0.2373 + 34.1048 * x\nr = 0.9907 R2 = 0.9814 p = 0.0000\nStandardfehler des Anstiegs: 0.4792\n33.154  ≤ 34.105 ≤ 35.056\n\ndie_ahnungslosen Konfidenzniveau: 0.95\ny = 0.1798 + 34.9183 * x\nr = 0.9886 R2 = 0.9773 p = 0.0000\nStandardfehler des Anstiegs: 0.4651\n33.998  ≤ 34.918 ≤ 35.838\n```\n:::\n:::\n\n\n## Code\n\n::: {.cell execution_count=27}\n``` {.python .cell-code}\nanzahl_teams = hooke['Team'].unique().size\nalpha = 0.10\n\nfor i in range(anzahl_teams):\n\n  reg_data = hooke.loc[hooke['Team'] == hooke['Team'].unique()[i], :]\n  x = reg_data['Abstandsänderung']\n  y = reg_data['Kraft']\n  n = len(x)\n  \n  print(\"\\n\", hooke['Team'].unique()[i], \" Konfidenzniveau: \", 1 - alpha, sep = '')\n\n  slope, intercept, rvalue, pvalue, slope_stderr = scipy.stats.linregress(x, y)\n  print(f\"y = {intercept:.4f} + {slope:.4f} * x\\n\",\n        f\"r = {rvalue:.4f} R2 = {rvalue ** 2:.4f} p = {pvalue:.4f}\\n\",\n        f\"Standardfehler des Anstiegs: {slope_stderr:.4f}\", sep = '')\n\n  print(f\"{slope - scipy.stats.t.ppf(q = 1 - alpha / 2, df = n - 2) * slope_stderr:.3f}  ≤ {slope:.3f} ≤ {slope + scipy.stats.t.ppf(q = 1 - alpha / 2, df = n - 2) * slope_stderr:.3f}\")\n\nalpha = 0.05\n\nfor i in range(anzahl_teams):\n\n  reg_data = hooke.loc[hooke['Team'] == hooke['Team'].unique()[i], :]\n  x = reg_data['Abstandsänderung']\n  y = reg_data['Kraft']\n  n = len(x)\n  \n  print(\"\\n\", hooke['Team'].unique()[i], \" Konfidenzniveau: \", 1 - alpha, sep = '')\n\n  slope, intercept, rvalue, pvalue, slope_stderr = scipy.stats.linregress(x, y)\n  print(f\"y = {intercept:.4f} + {slope:.4f} * x\\n\",\n        f\"r = {rvalue:.4f} R2 = {rvalue ** 2:.4f} p = {pvalue:.4f}\\n\",\n        f\"Standardfehler des Anstiegs: {slope_stderr:.4f}\", sep = '')\n\n  print(f\"{slope - scipy.stats.t.ppf(q = 1 - alpha / 2, df = n - 2) * slope_stderr:.3f}  ≤ {slope:.3f} ≤ {slope + scipy.stats.t.ppf(q = 1 - alpha / 2, df = n - 2) * slope_stderr:.3f}\")\n```\n:::\n\n\n## Auswertung\nDie Punktschätzung der Federkonstante von Team fabi 34.105 liegt im 95-%-Konfidenzintervall der Messung von Team die_ahnungslosen 33.998 ≤ 34.918 ≤ 35.838. Die Punktschätzung der Federkonstante von Team fabi 34.105 liegt **aber nicht im 90-%-Konfidenzintervall** der Messung von Team die_ahnungslosen 34.148  ≤ 34.918 ≤ 35.689.\n\nUnabhängig vom gewählten Vertrauensniveau liegt die Punktschätzung der Federkonstante von Team kreativkoepfe 29.764 nicht in den Konfidenzintervallen der beiden übrigen Teams.\n\n:::: {#wrn-results .callout-warning appearance=\"simple\"}\n## Ergebnisse\nAbhängig vom gewählten Vorgehen sind andere Ergebnisse möglich, beispielsweise durch das Entfernen von als Ausreißern eingestuften Einzelwerten oder einer anderen Behandlung der Messreihe vom Team fabi für das angehängte Gewicht 50 Gramm.\n::::\n:::\n\n",
    "supporting": [
      "übung-hooke_files/figure-pdf"
    ],
    "filters": []
  }
}